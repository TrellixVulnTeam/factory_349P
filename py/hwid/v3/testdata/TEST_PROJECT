checksum: 2f5e6b5a295c59eee7f2dcd0c610abc88a068708

project: CHROMEBOOK

encoding_patterns:
  0: default

image_id:
  0: EVT
  1: DVT
  2: PVT
  3: PVT2

pattern:
  - image_ids: [0, 1]
    encoding_scheme: base32
    fields:  # only 1 bit for cpu_field, no flash_chip_field
    - audio_codec_field: 1
    - battery_field: 2
    - bluetooth_field: 0
    - cellular_field: 1
    - cpu_field: 1                  # 5 bits
    - display_panel_field: 0
    - dram_field: 2
    - embedded_controller_field: 0
    - firmware_field: 1
    - firmware_keys_field: 1
    - keyboard_field: 1             # 10 bits
    - region_field: 2
    - storage_field: 2
    - video_field: 0                # 14 bits

  - image_ids: [2, 3]
    encoding_scheme: base8192
    fields:
    - audio_codec_field: 1
    - battery_field: 2              # 3 bits
    - bluetooth_field: 0
    - cellular_field: 1
    - cpu_field: 1
    - display_panel_field: 0
    - dram_field: 2
    - embedded_controller_field: 0
    - firmware_field: 1              # 8 bits
    - firmware_keys_field: 1
    - keyboard_field: 1
    - cpu_field: 1
    - region_field: 2                # 13 bits
    - storage_field: 2
    - video_field: 0

    - flash_chip_field: 0
    - cpu_field: 1                  # 16 bits

encoded_fields:
  audio_codec_field:
    0:
      audio_codec: [codec_0, hdmi_0]
    1:
      audio_codec: [codec_1, hdmi_1]
  battery_field:
    0:
      battery: battery_unsupported
    1:
      battery: battery_deprecated
    2:
      battery: battery_unqualified
    3:
      battery: battery_supported
  bluetooth_field:
    0:
      bluetooth: bluetooth_0
  cellular_field:
    0:
      cellular: []
    1:
      cellular: cellular_0
  cpu_field:
    0:
      cpu: cpu_0
    1:
      cpu: cpu_1
    2:
      cpu: cpu_2
    3:
      cpu: cpu_3
    4:
      cpu: cpu_4
    5:
      cpu: cpu_5
  display_panel_field:
    0:
      display_panel: display_panel_0
  dram_field:
    0:
      dram: dram_0
    1:
      dram:
      - dram_1
      - dram_1
    2:
      dram:
      - dram_2
      - dram_2
      - dram_2
  embedded_controller_field:
    0:
      embedded_controller: embedded_controller_0
  firmware_field:
    0:
      ro_ec_firmware: ro_ec_firmware_0
      ro_main_firmware: ro_main_firmware_0
    1:
      ro_ec_firmware: ro_ec_firmware_0
      ro_main_firmware: ro_main_firmware_1
  firmware_keys_field:
    0:
      firmware_keys: firmware_keys_premp
    1:
      firmware_keys: firmware_keys_mp
  flash_chip_field:
    0:
      flash_chip: flash_chip_0
  keyboard_field:
    0:
      keyboard: keyboard_us
    1:
      keyboard: keyboard_gb
  region_field: !region_field [us, tw]
  storage_field:
    0:
      storage: storage_0
    1:
      storage: storage_1
    2:
      storage: storage_2
  video_field:
    0:
      video: camera_0

components:
  audio_codec:
    items:
      codec_0:
        values: { compact_str: Codec 0 }

      codec_1:
        values: { compact_str: Codec 1 }

      hdmi_0:
        values: { compact_str: HDMI 0 }

      hdmi_1:
        values: { compact_str: HDMI 1 }

  battery:
    items:
      battery_unsupported:
        status: unsupported
        values:
          tech: Battery Li-ion
          size: '2500000'

      battery_deprecated:
        status: deprecated
        values:
          tech: Battery Li-ion
          size: '5000000'

      battery_unqualified:
        status: unqualified
        values:
          tech: Battery Li-ion
          size: '7500000'

      battery_supported:
        status: supported
        values:
          tech: Battery Li-ion
          size: '10000000'

  bluetooth:
    items:
      bluetooth_0:
        values:
          idVendor: '0123'
          idProduct: abcd
          bcd: '0001'

  cellular:
    items:
      cellular_0:
        values:
          idVendor: 89ab
          idProduct: abcd
          name: Cellular Card

  cpu:
    items:
      cpu_0:
        values:
          name: CPU @ 1.80GHz
          cores: '4'

      cpu_1:
        values:
          name: CPU @ 2.00GHz
          cores: '4'

      cpu_2:
        values:
          name: CPU @ 2.20GHz
          cores: '4'

      cpu_3:
        values:
          name: CPU @ 2.40GHz
          cores: '4'

      cpu_4:
        values:
          name: CPU @ 2.60GHz
          cores: '4'

      cpu_5:
        values:
          name: CPU @ 2.80GHz
          cores: '4'

  display_panel:
    items:
      display_panel_0:
        values:
          fake_flag: flag_value

  dram:
    items:
      dram_0:
        values:
          vendor: DRAM 0
          size: 4G

      dram_1:
        values:
          vendor: DRAM 1
          size: 4G

      dram_2:
        values:
          vendor: DRAM 2
          size: 8G

  embedded_controller:
    items:
      embedded_controller_0:
        values: { compact_str: Embedded Controller }

  firmware_keys:
    items:
      firmware_keys_premp:
        values:
          key_recovery: kv3#key_recovery_premp
          key_root: kv3#key_root_premp
      firmware_keys_mp:
        values:
          key_recovery: kv3#key_recovery_mp
          key_root: kv3#key_root_mp

  flash_chip:
    items:
      flash_chip_0:
        values: { compact_str: Flash Chip }

  keyboard:
    items:
      keyboard_gb:
        values:
          compact_str: xkb:gb::eng

      keyboard_us:
        values:
          compact_str: xkb:us::eng

  region: !region_component

  ro_ec_firmware:
    items:
      ro_ec_firmware_0:
        values: { compact_str: ev2#ro_ec_firmware_0 }

  ro_main_firmware:
    items:
      ro_main_firmware_0:
        status: deprecated
        values: { compact_str: mv2#ro_main_firmware_0 }
      ro_main_firmware_1:
        values: { compact_str: mv2#ro_main_firmware_1 }

  storage:
    items:
      storage_0:
        values:
          type: SSD
          size: 16G
          serial: '#123456'

      storage_1:
        values:
          type: SSD
          size: 32G
          serial: '#123456'

      storage_2:
        values:
          type: HDD
          size: 500G
          serial: '#123456'

  video:
    items:
      camera_0:
        values:
          idVendor: '4567'
          idProduct: abcd
          type: webcam

rules:
- name: device_info.set_image_id
  evaluate: SetImageId('PVT2')

- name: device_info.component.has_cellular
  when: GetDeviceInfo('component.has_cellular')
  evaluate: SetComponent('cellular', 'cellular_0')
  otherwise: SetComponent('cellular', None)

- name: verify.components.rule_1
  when: ComponentEq('audio_codec', 'codec_1') and
        ComponentEq('audio_codec', 'hdmi_1')
  evaluate:
  - Assert(ComponentIn('cpu', ['cpu_3', 'cpu_4', 'cpu_5']))
